<?phpdefined('_JEXEC') or die();JImport('b0.Sparepart.SparepartKeys');JImport('b0.pricehelper');//JImport('b0.fixtures');//$params = $this->tmpl_params['list'];$user = $this->user;$user_rights = $user->getAuthorisedViewLevels();?><div id="spareparts" class="uk-margin-top">    <?php foreach ($this->items as $item):        $fields = $item->fields_by_key;	    $Article = new stdClass();	    $Article->isSpecial = ($fields[SparepartKeys::KEY_IS_SPECIAL]->value == 1) ? true : false;	    $Article->isOriginal = $fields[SparepartKeys::KEY_IS_ORIGINAL]->value == 1 ? true : false;	    $Article->isByOrder = ($fields[SparepartKeys::KEY_IS_BY_ORDER]->value == 1) ? true : false;	    $Article->isGeneral = (!($fields[SparepartKeys::KEY_IS_SPECIAL]->value == 1) && !($fields[SparepartKeys::KEY_IS_BY_ORDER]->value == 1)) ? true : false;	    $Article->priceGeneral = $fields[SparepartKeys::KEY_PRICE_GENERAL]->value;	    $Article->priceSpecial = $fields[SparepartKeys::KEY_PRICE_SPECIAL]->value ?? 0;	    $Article->priceSimple = $fields[SparepartKeys::KEY_PRICE_SIMPLE]->value;	    $Article->priceSilver = $fields[SparepartKeys::KEY_PRICE_SILVER]->value;	    $Article->priceGold = $fields[SparepartKeys::KEY_PRICE_GOLD]->value;	    $Article->priceDelivery = $fields[SparepartKeys::KEY_PRICE_DELIVERY]->value;	    $Article->priceCurrent = $Article->isSpecial ? $Article->priceSpecial : $Article->priceGeneral;		?>        <article class="uk-article uk-visible-hover">            <!-- Панель управления -->			<?php if($item->controls){				echo JLayoutHelper::render('b0.controls-list', $item->controls);			}?>            <h2 class="uk-article-title uk-text-center-small">                <a href="<?= JRoute::_($item->url);?>" target="_blank">					<?= $item->title?>                </a>            </h2>            <div class="uk-grid" data-uk-grid-margin>                <div class="uk-width-medium-2-10 uk-text-center-small">					<?= $fields[SparepartKeys::KEY_IMAGE]->result ?? '';?>                </div>                <div class="uk-width-medium-4-10 uk-text-center-small">					<?php if (isset($fields[SparepartKeys::KEY_MANUFACTURER]))						echo '<p><strong>Производитель: </strong>'.$fields[SparepartKeys::KEY_MANUFACTURER]->result.'</p>';					?>					<?php if (isset($fields[SparepartKeys::KEY_PRODUCT_CODE])) {						echo '<p><strong>Код товара: </strong>'.$fields[SparepartKeys::KEY_PRODUCT_CODE]->result;						echo '</p>';					} ?>					<?php if (isset($fields[SparepartKeys::KEY_SUBTITLE]))						echo '<p class="ls-sub-title">'.$fields[SparepartKeys::KEY_SUBTITLE]->result.'</p>';					?>                </div>                <div class="uk-width-medium-4-10 uk-text-center-small">                    <div class="uk-panel uk-panel-box uk-vertical-align-middle">						<?php if ($Article->isByOrder){							echo '<p class="ls-price-second">Ожидается поступление</p>';							echo '<p class="uk-h5 uk-text-muted">Цена уточняется при заказе</p>';						}                        elseif ($Article->isSpecial){							echo '<p class="ls-price-special uk-text-danger">Специальная цена: ' . render_price($Article->priceSpecial) . '</p>';							echo '<p class="ls-price-second">Обычная цена: <del>' . render_price($Article->priceGeneral) . '</del></p>';							echo '<p>Вы экономите ' . render_economy($Article->priceGeneral, $Article->priceSpecial).'</p>';						}						else{							echo '<p class="ls-price-second">Цена: ' . render_price($Article->priceGeneral) . '</p>';							echo '<p class="ls-price-special uk-text-danger">Цена при доставке по СПб: ' . render_price($Article->priceDelivery) . '</p>';							echo '<p>Вы экономите ' . render_economy($Article->priceGeneral, $Article->priceDelivery).'</p>';						} ?>                    </div>					<?php if (isset($fields[SparepartKeys::KEY_VENDOR_CODE]) && in_array($fields[SparepartKeys::KEY_VENDOR_CODE]->params->get('core.field_view_access'), $user_rights)) { ?>                        <hr class="uk-grid-divider">                        <p>                            <strong><?= $fields[SparepartKeys::KEY_VENDOR_CODE]->label; ?>: </strong><?= $fields[SparepartKeys::KEY_VENDOR_CODE]->result;?>                        </p>					<?php } ?>                </div>            </div>        </article>	<?php endforeach;?></div><hr class="uk-article-divider">